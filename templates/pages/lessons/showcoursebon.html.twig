{% extends 'base.html.twig' %}

{% block title %}Leçon
{% endblock %}

{% block body %}
	<div class="container mt-4">
		<h1>Titre de la leçon n°{{ lesson.id }}:

			{{ lesson.title }}</h1>

		{% set isEnded=false %}
		{% for terminee in lesson.getEndedLessons  %}

			{% if terminee.users == app.user %}

				{% set isEnded=true %}

			{% endif %}

		{% endfor %}


		<a class="btn btn-secondary btn-lg mb-4" href="{{ path('app_lessons_end', {'id': lesson.id}) }}">{{ isEnded ? 'Leçon en cours' : 'Leçon terminée'}}</a>

		{% for formation in formations %}
			<h2>Titre de la formation:
				<strong>{{formation.title}}</strong>
			</h2>


			{% for section in lesson.sections %}


				<h3>Titre de la Section:
					{{ section.title}}

					<table class="table">
						<tbody>
							<tr>
								<th>
									Contenu
								</th>
								<td>
									{{ lesson.description }}
								</td>
							</tr>
							<tr>
								<th>
									Instructeur
								</th>
								<td>
									{{ lesson.slug }}
								</td>
							</tr>
							<tr>
								<th>
									Video
								</th>
								<td>
									{{ lesson.video }}
								</td>
							</tr>
							<tr>
								<th>
									{# Terminée<a class="btn btn-secondary btn-lg" href="{{ path('app_ended_lessons_new', {'id': lesson.id}) }}">Terminée à faire!!!</a> #}


								</th>
								<td>
									{{ lesson.isEnded ? 'Yes' : 'No' }}
								</td>
							</tr>
							<tr>
								<th>
									Créée
								</th>
								<td>
									{{ lesson.createdAt ? lesson.createdAt|date('d-m-Y') : '' }}
								</td>
							</tr>
							<tr>
								<th>
									Dernière modification
								</th>
								<td>
									{{ lesson.updatedAt ? lesson.updatedAt|date('d-m-Y ') : '' }}
								</td>
							</tr>
						</tbody>
					</table>
				{% endfor %}
			{% endfor %}


			<a class="btn btn-secondary btn-lg" href="{{ path('learningsection') }}">

				Retour au menu</a>


			{# <a href="{{ path('app_lessons_edit', {'id': lesson.id}) }}">edit</a> #}

			{# {{ include('pages/lessons/_delete_form.html.twig') }} #}
		</div>

	{% endblock %}
